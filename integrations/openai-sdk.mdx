---
title: OpenAI SDK
sidebarTitle: OpenAI SDK
description: Using Edgee with OpenAI SDK
icon: /images/icons/openai.svg
---

Edgee provides an **OpenAI-compatible API**, which means you can use the official OpenAI SDKs for TypeScript and Python with Edgee. This allows you to leverage Edgee's routing, observability, and cost tracking features without changing your existing code.

## Why Use OpenAI SDK with Edgee?

- **Up to 50% Cost Reduction**: Automatic token compression when enabled via headers or console
- **No Code Changes**: Use your existing OpenAI SDK code as-is
- **Multi-Provider Access**: Route to OpenAI, Anthropic, Google, and more through one API
- **Automatic Failover**: Built-in reliability with fallback providers
- **Cost Tracking**: Real-time visibility into token usage in the Edgee dashboard
- **Observability**: Request tracing, compression metrics, and logging across all providers

## Installation

Install the OpenAI SDK for your preferred language:

<Tabs>
  <Tab title="TypeScript">
    ```bash
    npm install openai
    ```
  </Tab>
  <Tab title="Python">
    ```bash
    pip install openai
    ```
  </Tab>
</Tabs>

## Configuration

Configure the OpenAI SDK to use Edgee's API endpoint:

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY, // Your Edgee API key
});

async function main() {
  const completion = await openai.chat.completions.create({
    model: "gpt-4o",
    messages: [
      { role: "user", content: "What is the capital of France?" }
    ],
  });

  console.log(completion.choices[0].message.content);
}

main();
```

```python title="Python"
from openai import OpenAI
from os import getenv

# Configure OpenAI SDK to use Edgee
client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),  # Your Edgee API key
)

completion = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {
      "role": "user",
      "content": "What is the capital of France?",
    },
  ],
)

print(completion.choices[0].message.content)
```

</CodeGroup>

## Token Usage Tracking

Access standard OpenAI token usage metrics in every response:

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY,
});

const completion = await openai.chat.completions.create({
  model: "gpt-4o",
  messages: [
    { role: "user", content: "Summarize this long document..." }
  ],
});

console.log(completion.choices[0].message.content);
console.log(`Prompt tokens: ${completion.usage?.prompt_tokens}`);
console.log(`Completion tokens: ${completion.usage?.completion_tokens}`);
console.log(`Total tokens: ${completion.usage?.total_tokens}`);
```

```python title="Python"
from openai import OpenAI
from os import getenv

client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),
)

completion = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {"role": "user", "content": "Summarize this long document..."}
  ],
)

print(completion.choices[0].message.content)
print(f"Prompt tokens: {completion.usage.prompt_tokens}")
print(f"Completion tokens: {completion.usage.completion_tokens}")
print(f"Total tokens: {completion.usage.total_tokens}")
```

</CodeGroup>

<Note>
  When compression is enabled, `prompt_tokens` reflects the compressed token count. View detailed compression metrics in the [Edgee dashboard](/features/observability).
</Note>

## Compression & Tags via Headers

When using the OpenAI SDK with Edgee, you can control token compression and add tags using HTTP headers:

### Enabling Compression

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY,
  defaultHeaders: {
    "x-edgee-enable-compression": "true",
    "x-edgee-compression-rate": "0.8", // Target 80% compression (0.0-1.0)
  },
});

// All requests will use compression with 80% target rate
const completion = await openai.chat.completions.create({
  model: "gpt-4o",
  messages: [
    { role: "user", content: "Analyze this long document..." }
  ],
});
```

```python title="Python"
from openai import OpenAI
from os import getenv

client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),
  default_headers={
    "x-edgee-enable-compression": "true",
    "x-edgee-compression-rate": "0.8",  # Target 80% compression (0.0-1.0)
  },
)

# All requests will use compression
completion = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {"role": "user", "content": "Analyze this long document..."}
  ],
)
```

</CodeGroup>

### Adding Tags for Analytics

Combine compression with tags to track requests in your dashboard:

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY,
  defaultHeaders: {
    "x-edgee-enable-compression": "true",
    "x-edgee-compression-rate": "0.8",
    "x-edgee-tags": "production,openai-sdk,user-123",
  },
});
```

```python title="Python"
from openai import OpenAI
from os import getenv

client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),
  default_headers={
    "x-edgee-enable-compression": "true",
    "x-edgee-compression-rate": "0.8",
    "x-edgee-tags": "production,openai-sdk,user-123",
  },
)
```

</CodeGroup>

**Available Headers:**

| Header | Type | Description |
|--------|------|-------------|
| `x-edgee-enable-compression` | `"true"` or `"false"` | Enable token compression for requests (overrides console settings) |
| `x-edgee-compression-rate` | `string` | Target compression rate (0.0-1.0, default 0.75) |
| `x-edgee-tags` | `string` | Comma-separated tags for analytics and filtering |

<Tip>
  You can also enable compression organization-wide or per API key in the [Edgee console](/features/token-compression#enabling-token-compression). Headers override console settings for specific requests.
</Tip>

## Advanced Usage

### Function Calling (Tools)

Edgee fully supports OpenAI's function calling interface:

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY,
});

async function main() {
  const completion = await openai.chat.completions.create({
    model: "gpt-4o",
    messages: [
      { role: "user", content: "What's the weather in Paris?" }
    ],
    tools: [
      {
        type: "function",
        function: {
          name: "get_weather",
          description: "Get the current weather for a location",
          parameters: {
            type: "object",
            properties: {
              location: {
                type: "string",
                description: "City name",
              },
            },
            required: ["location"],
          },
        },
      },
    ],
    tool_choice: "auto",
  });

  if (completion.choices[0].message.tool_calls) {
    console.log("Tool calls:", completion.choices[0].message.tool_calls);
  } else {
    console.log("Response:", completion.choices[0].message.content);
  }
}

main();
```

```python title="Python"
from openai import OpenAI
from os import getenv

client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),
)

completion = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {
      "role": "user",
      "content": "What's the weather in Paris?",
    },
  ],
  tools=[
    {
      "type": "function",
      "function": {
        "name": "get_weather",
        "description": "Get the current weather for a location",
        "parameters": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "City name",
            },
          },
          "required": ["location"],
        },
      },
    },
  ],
  tool_choice="auto",
)

if completion.choices[0].message.tool_calls:
    print("Tool calls:", completion.choices[0].message.tool_calls)
else:
    print("Response:", completion.choices[0].message.content)
```

</CodeGroup>

### Streaming Responses

Edgee supports streaming responses for real-time token delivery:

<CodeGroup>

```typescript title="TypeScript"
import OpenAI from "openai";

const openai = new OpenAI({
  baseURL: "https://api.edgee.ai/v1",
  apiKey: process.env.EDGEE_API_KEY,
});

async function main() {
  const stream = await openai.chat.completions.create({
    model: "gpt-4o",
    messages: [
      { role: "user", content: "Tell me a short story" }
    ],
    stream: true,
  });

  for await (const chunk of stream) {
    const content = chunk.choices[0]?.delta?.content || "";
    process.stdout.write(content);
  }
}

main();
```

```python title="Python"
from openai import OpenAI
from os import getenv

client = OpenAI(
  base_url="https://api.edgee.ai/v1",
  api_key=getenv("EDGEE_API_KEY"),
)

stream = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {
      "role": "user",
      "content": "Tell me a short story",
    },
  ],
  stream=True,
)

for chunk in stream:
    content = chunk.choices[0].delta.content or ""
    print(content, end="", flush=True)
```

</CodeGroup>


## Migration from OpenAI

If you're already using the OpenAI SDK, migrating to Edgee is straightforward:

1. **Change the base URL**: Update `baseURL` from `https://api.openai.com/v1` to `https://api.edgee.ai/v1`
2. **Update API key**: Use your Edgee API key instead of your OpenAI key
3. **That's it!** Your existing code will work without any other changes

<Tip>
  All OpenAI SDK features are supported, including streaming, function calling, and response formatting. Edgee maintains full compatibility with the OpenAI API specification.
</Tip>

## What's Next?

<CardGroup cols={2}>
  <Card title="Get API Key" icon="key" href="/quickstart/api-key">
    Create an account and get your Edgee API key to start using the OpenAI SDK.
  </Card>
  <Card title="Supported Models" icon="brain" href="https://www.edgee.ai/models">
    Browse 200+ models available through Edgee from multiple providers.
  </Card>
  <Card title="Edgee SDK" icon="code" href="/sdk/typescript">
    Check out the native Edgee SDKs for TypeScript, Python, Go, and Rust.
  </Card>
  <Card title="API Reference" icon="terminal" href="/api-reference">
    Explore the full REST API documentation.
  </Card>
</CardGroup>