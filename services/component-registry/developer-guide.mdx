---
title: Developer Guide
description: Step-by-step guide for component developers
icon: rectangle-terminal
---

import EdgeeSdk from '/snippets/edgee-sdk.mdx';

<EdgeeSdk />

Welcome to Edgee! This guide will cover how to create a new component locally,
compile it to WebAssembly, and push it to the Edgee Component Registry.

Before diving into this guide, we highly recommend reviewing these [foundational concepts](./foundational-concepts)

## How to create a new Edgee component

### Step 1: Install and configure

First, install the Edgee CLI:

<CodeGroup>

```bash curl
$ curl https://install.edgee.cloud | sh
```

```bash brew
$ brew tap edgee-cloud/edgee
$ brew install edgee
```

</CodeGroup>

Second, log in using the token from your Edgee account (you can [create one here](https://www.edgee.cloud/me/settings/tokens)):

```bash 
$ edgee login
Enter Edgee API token (press Ctrl+R to toggle input display): ****
```

Verify that the API is working correctly using this token:

```bash 
$ edgee whoami
Logged in as:
  ID:    XYZ-XYZ-DYZ
  Name:  Your name
  Email: your@email.com
```

#### How to get CLI help

If you need guidance on a given command or sub-command, check out the `help` command:

```bash 
$ edgee help
Usage: edgee <COMMAND>
Commands:
  login       Log in to the Edgee Console
  whoami      Print currently login informations
  components  Components management commands  [aliases: component]
  serve       Run the Edgee server [aliases: server]
```

You can also use it to explore available sub-commands:

```bash
$ edgee help components
Usage: edgee components <COMMAND>
Commands:
  init   Init a new component manifest in the current directory
  new    Create component in a new directory with sample code
  pull   Pull a component from the Edgee Component Registry
  push   Push a component to the Edgee Component Registry
  check  Check if the local .wasm file is valid
  test   Run the component in the current folder with sample events
```

Or command-specific options:

```bash
$ edgee help components test
Usage: edgee components test [OPTIONS]
Options:
  --settings <SETTINGS>      Comma-separated key=value pairs for settings
  --event-type <EVENT_TYPE>  The event type you want to test (valid values: page, track, or user)
  --display-input            Whether to log the full input event in stdout or not (false by default)
```

Alternatively, `--help` and `-h` also work in all cases.

### Step 2: Create a new component

Next, run `edgee components new` to create a new component and choose your preferred programming language.
This creates a local folder containing sample code and tools to help you get started quickly.

```bash 
$ edgee components new
? Enter the name of the component: my-component
? Select the language of the component:
  C
  CSharp
  Go
  JavaScript
  Python
> Rust
  TypeScript
Downloading sample code for Rust...
Extracting code...
New project my-component setup, check README to install the correct dependencies
```

Navigate to the new folder to begin implementing your business logic.

#### Implementing your component

A data collection component must implement the following WIT interface:

```text
page: func(e: event, settings: dict) -> result<edgee-request, string>;
track: func(e: event, settings: dict) -> result<edgee-request, string>;
user: func(e: event, settings:dict) -> result<edgee-request, string>;
```

The corresponding method is invoked when a `page`, `track` or `user` event is sent for data collection
by the Edgee proxy. These methods receive the incoming event object and a set of settings.
They're expected to return an `edgee-request` object, which looks like this:

```text
record edgee-request {
    method: http-method,
    url: string,
    headers: dict,
    forward-client-headers: bool,
    body: string,
}
```

Based on the programming language, you'll find the corresponding types and unit tests to help you with the implementation.
In case you're having trouble with implementing your component, check out other existing components such as
[Google Analytics](https://github.com/edgee-cloud/ga-component),
[Segment](https://github.com/edgee-cloud/segment-component),
[Amplitude](https://github.com/edgee-cloud/amplitude-component),
[Meta CAPI](https://github.com/edgee-cloud/meta-capi-component),
[LinkedIn CAPI](https://github.com/edgee-cloud/linkedin-capi-component),
or [Amazon S3](https://github.com/edgee-cloud/s3-component).

<Note>
  Note: Edgee components don't perform HTTP calls directly, as they run in a sandboxed environment with no access
  to network or file system. The intended purpose of a component is to instruct the proxy on which HTTP request to perform
  to fullfil its data collection duties.

  For example, the Google Analytics component returns an `edgee-request` object that points to the official
`https://www.google-analytics.com/g/collect` endpoint, with the correct querystring parameters.
Similarly, the Amazon S3 component points to `https://{bucket}.s3.amazonaws.com` with the correct sigv4 authentication headers.
</Note>




#### Reusability and settings

To make your Edgee component reusable for other developers and organizations via the Edgee Component Registry,
you can define a set of input `settings`, containing all the API credentials or dynamic
information you need to craft the correct `edgee-request` object. For example, the Google Analytics component only expects a
`ga_measurement_id` setting, while the Segment component expects `segment_project_id` and `segment_write_key`.

You can configure the expected settings for your component in the local manifest file (TODO add more details about this).

### Step 3: Build and test locally

When the implementation is ready, you can build your component locally using the CLI:

```bash
$ edgee components build
```

The output of this command will be a new .wasm file in the current folder.

You can also customize the behavior of the build command in the manifest file by changing the target file name
and the default build script (TODO add more details about this).

Before pushing your component to the Edgee Component Registry, it's highly recommended to validate and test the .wasm file locally:

```bash
# validate local .wasm file
$ edgee components check

# run the Wasm file with test events
$ edgee components test \
    --event-type page \
    --settings "setting1=value1,setting2=value2"
```

Use the test command to run your local .wasm file with a sample event and provided settings.
If no `--event-type` is provided, it will run the .wasm file with all event types (page, track, and user).
This helps ensure your component behaves as expected from the proxy's perspective, in addition to your unit tests.


### Step 3: Push the component 

When you're ready to publish your component, it's time to push it using the Edgee CLI:

```bash
$ edgee components push
```

The component will be pushed to the Edgee Component Registry under your Organization.
In case your Edgee user is part of multiple Organizations, you'll be prompted to choose one.

Congratulations! Your component is now available at `https://www.edgee.cloud/{organization}/{component}`.

In case you prefer to keep your component private, the CLI will ask you to confirm the component's visibility during the push command
(TODO add more details about this)

